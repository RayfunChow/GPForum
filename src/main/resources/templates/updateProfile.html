<!DOCTYPE html>
<html lang="zh-hans" class="h-100">
<head>
    <meta charset="UTF-8">
    <title>修改个人信息</title>

    <link rel="stylesheet" href="/layui/css/layui.css">
    {{>layout/head}}
    <!--<link rel="stylesheet" href="/layui/css/layui.css">-->
    <style type="text/css">

        div.icon {
            width: 200px;
            height: 200px;
            display: block;
            position: relative;
            float: left;
            padding: 0px;
            margin: 10px;
            background: #e9e7e000;
        }

        div.icon_head {
            width: 150px;
            height: 150px;
            display: block;
            position: relative;
            float: left;
            padding: 0px;
            margin: 25px;
            border-radius: 75px;
            -webkit-border-radius: 75px;
            -moz-border-radius: 75px;
            -o-border-radius: 75px;
            -webkit-background-clip: padding;
            overflow: hidden;
        }

        a.trans_name {
            width: 150px;
            height: 150px;
            display: block;
            position: absolute;
            left: 0px;
            bottom: 0px;
            padding: 0px;
            margin: 0px;
            z-index: 1;
            filter: Alpha(Opacity=0);
            opacity: 0;
        }

        span.icon_translucent {
            width: 150px;
            height: 60px;
            display: block;
            position: absolute;
            left: 0px;
            bottom: 0px;
            padding: 0px;
            margin: 0px;
            background: #000000;
            z-index: 2;
            filter: Alpha(Opacity=50);
            opacity: 0.5;
        }

        span.icon_name {
            width: 150px;
            height: 60px;
            display: block;
            position: absolute;
            left: 0px;
            bottom: 0px;
            padding: 0px;
            margin: 0px;
            color: #ffffff;
            font-size: 16px;
            text-align: center;
            line-height: 40px;
            z-index: 3;
        }

        a.trans_name:hover {
            filter: Alpha(Opacity=100);
            opacity: 1;
        }


    </style>
    <script src="/js/info.js"></script>
    <script src="/layui/layui.js"></script>
    <!--<script src="../js/messages_zh.js"></script>-->
    <style>

        .footer {
            background-color: #f5f5f5;
        }

        .footer > .container {
            padding-right: 15px;
            padding-left: 15px;
        }

    </style>
    <style>
        .div-a{ position:absolute; left:60px; top:40px;  width:360px; height:240px}
        .div-b{ position:relative; left:10px; top:10px;  width:480px; height:320px}
    </style>
</head>
<body class="d-flex flex-column h-100" style="background:#eff0ea">
{{>layout/navbar}}

<main role="main" class="flex-shrink-0" style="margin-top: 30px">
    <div class="container">

        <div class="card">
            <div class="card-header text-center">
                我的个人信息
            </div>
            <div class="card-body row ">
                <!--                <div class="col-1"></div>-->
                <form action="" id="updateProfileForm" class="col-7" style="padding-left: 50px;margin-left: 50px;">
                    <div class="form-group row">
                        <label for="userNickname" class="col-sm-2 col-form-label">昵&nbsp;&nbsp;&nbsp;&nbsp;称 <span
                                style="color: red">*</span></label>
                        <div class="">
                            <input type="text" class="form-control" id="userNickname" name="userNickname" value="">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="userNickname" class="col-sm-2 col-form-label">性&nbsp;&nbsp;&nbsp;&nbsp;别</label>
                        <div class="">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                                       value="男">
                                <label class="form-check-label" for="inlineRadio1">男</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                                       value="女">
                                <label class="form-check-label" for="inlineRadio2">女</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="userBirthday" class="col-sm-2 col-form-label">生&nbsp;&nbsp;&nbsp;&nbsp;日</label>
                        <div class="">
                            <input type="date" class="form-control" id="userBirthday" name="userBirthday"
                                   placeholder="YYYY/MM/DD" value="">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">地&nbsp;&nbsp;&nbsp;&nbsp;区</label>
                        <div class="form-group ">
                            <!--<label for="inputProvince"></label>-->
                            <select id="inputProvince" onchange="getCity()" class="form-control" style="width: 190px">
                                <option value="" style="display: none;" disabled selected>选择省</option>
                                <option>...</option>
                            </select>
                        </div>
                        <div class="form-group ">
                            <!--<label for="inputCity">State</label>-->
                            <select id="inputCity" class="form-control" style="width: 190px">
                                <option value="" style="display: none;" disabled selected>选择城市</option>
                                <option>...</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">爱&nbsp;&nbsp;&nbsp;&nbsp;好</label>
                        <div class="">
                            <div class=" row toggle-button" style="margin-left: 2px">
                                <button type="button" class="btn btn-outline-secondary" data-toggle="button"
                                        name="hobby_tag"
                                        aria-pressed="false" autocomplete="off">
                                    音乐
                                </button>
                                <button type="button" class="btn btn-outline-secondary" data-toggle="button"
                                        name="hobby_tag"
                                        aria-pressed="false" autocomplete="off">
                                    电影
                                </button>
                                <button type="button" class="btn btn-outline-secondary" data-toggle="button"
                                        name="hobby_tag"
                                        aria-pressed="false" autocomplete="off">
                                    动漫
                                </button>
                                <button type="button" class="btn btn-outline-secondary" data-toggle="button"
                                        name="hobby_tag"
                                        aria-pressed="false" autocomplete="off">
                                    电竞
                                </button>
                                <button type="button" class="btn btn-outline-secondary" data-toggle="button"
                                        name="hobby_tag"
                                        aria-pressed="false" autocomplete="off">
                                    读书
                                </button>
                                <button type="button" class="btn btn-outline-secondary" data-toggle="button"
                                        name="hobby_tag"
                                        aria-pressed="false" autocomplete="off">
                                    数码
                                </button>
                                <button type="button" class="btn btn-outline-secondary" data-toggle="button"
                                        name="hobby_tag"
                                        aria-pressed="false" autocomplete="off">
                                    摄影
                                </button>
                                <button type="button" class="btn btn-outline-secondary" data-toggle="button"
                                        name="hobby_tag"
                                        aria-pressed="false" autocomplete="off">
                                    美食
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row btn-group-toggle"></div>
                    <div class="form-group row">
                        <label for="userSignature" class="col-sm-2 col-form-label">个性签名</label>
                        <div>
                        <textarea type="text" class=" form-control" id="userSignature" value="" maxlength="100"
                                  style="width: 380px"></textarea>
                        </div>
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-outline-info" id="btnUpdateProfile">
                            修改个人信息
                        </button>
                    </div>

                </form>
                <hr style="width:1px;height:380px; ">
                <div class="col-4">
                    <div class="form-group" style="text-align: center;margin-top: 30px;margin-left: 70px">
                        <div class="row">
                            <!--                        <input type="image" class="nav-item rounded-circle" id="userAvatar" data-toggle="modal"-->
                            <!--                               data-target="#changeAvatarModal" src="/img/no_avatar.png" width="100px" height="100px"-->
                            <!--                               alt="" title="更换头像"> -->
                            <div class="icon">
                                <div class="icon_head" data-toggle="modal" data-target="#changeAvatarModal">
                                    <img class="nav-item rounded-circle" src="{{User.avatar}}" width="150px"
                                         id="UserAvatar"
                                         height="150px"/>
                                    <a href="#" class="trans_name">
                                        <span class="icon_translucent"></span>
                                        <span class="icon_name">修改头像</span>
                                    </a>
                                </div>
                            </div>

                            <h4 id="showUserEmail"></h4>


                            <!--</div>-->
                        </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-info" data-toggle="modal"
                            style="float: left;margin-left: 45px;"
                            data-target="#changePasswordModal">
                        <span class="oi oi-key"></span> 更改密码
                    </button>
                    <button type="button" class="btn btn-sm btn-outline-info" data-toggle="modal"
                            data-target="#addFaceModal" style="float: right;margin-right: 20px;"  onclick="photo(),time_out()">
                        <span class="oi oi-person"></span> 添加面部信息
                    </button>
                </div>
            </div>
        </div>

    </div>
</main>

{{>layout/footer}}

<!-- Modal -->
<div class="modal fade" id="changePasswordModal" tabindex="-1" role="dialog" data-backdrop="static">
    <div class="modal-dialog" role="document" style="max-width: 500px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changePasswordModalLabel">更改密码</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="" id="changePasswordForm">
                <div class="modal-body">
                    <p>
                    <div class="form-group row">
                        <label for="userEmail" class="col-sm-4 col-form-label">当前用户</label>
                        <div class="">
                            <input type="text" readonly class="form-control-plaintext" id="userEmail"
                                   name="userEmail" value="xxx@qq.com">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="password" class="col-sm-4 col-form-label">旧&nbsp;&nbsp;密&nbsp;&nbsp;码</label>
                        <div class="">
                            <input type="password" class="form-control" id="password" name="password" value="">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="newPassword" class="col-sm-4 col-form-label">新&nbsp;&nbsp;密&nbsp;&nbsp;码</label>
                        <div class="">
                            <input type="password" class="form-control" id="newPassword" name="newPassword"
                                   value="">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="confirmPassword" class="col-sm-4 col-form-label">确认新密码</label>
                        <div class="">
                            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
                                   value="">
                        </div>
                    </div>
                    </p>

                </div>
                <div class="modal-footer">
                    <button type="submit" id="btnChangePassword" class="btn btn-primary">确认
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="changeAvatarModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changeAvatarModalTitle">更换头像</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body ">
                <div class="layui-upload">
                    <button type="button" class="layui-btn" id="btnUploadAvatar">上传图片</button>
                    <p>文件大小不超过1M</p>
                    <div class="layui-upload-list">
                        <img class="layui-upload-img" id="demo1" style="width: 250px;height: 250px">
                        <p id="demoText"></p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="startUpload">提交</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addFaceModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addFaceModalTitle">添加面部信息</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="close_button()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="div-b" >
                <canvas id="canvas"  width="360" height="240" class="div-a"></canvas>
                <video id="video" autoplay  style="width: 360px;height: 240px" class="div-a"></video>

            </div>
<!--            <div class="modal-footer">-->
<!--            </div>-->
        </div>
    </div>
</div>

</body>

<!--描绘video截图-->
<!--<canvas id="canvas" width="480" height="320"></canvas>-->
<script type="text/javascript">
    var dataURL;
    var state="失败";
    var photo_state="打开";
    function time_out() {
        var dsq=setInterval(function () {
            if (state == "成功") {
                alert("人脸识别有误！请重试！")
            } else{
                clearInterval(dsq);
            }},15000);
    }
    function close_button(){
        photo_state="关闭";
        state="失败";
    }
    //访问用户媒体设备的兼容方法
    function getUserMedia(constrains,success,error){
        if(navigator.mediaDevices.getUserMedia){
            //最新标准API
            navigator.mediaDevices.getUserMedia(constrains).then(success).catch(error);
        } else if (navigator.webkitGetUserMedia){
            //webkit内核浏览器
            navigator.webkitGetUserMedia(constrains).then(success).catch(error);
        } else if (navigator.mozGetUserMedia){
            //Firefox浏览器
            navagator.mozGetUserMedia(constrains).then(success).catch(error);
        } else if (navigator.getUserMedia){
            //旧版API
            navigator.getUserMedia(constrains).then(success).catch(error);
        }
    }
    function photo() {
        photo_state="打开";
        state="成功";
        var video = document.getElementById("video");
        var canvas = document.getElementById("canvas");
        var context = canvas.getContext("2d");
        window.setTimeout(function login() {
            context.drawImage(video,0,0,360,240);
            dataURL=canvas.toDataURL();
            console.log(dataURL);
            context.clearRect(0,0,360,240);
            face_register();
        },1000);
    }

    //成功的回调函数
    function success(stream) {
        //兼容webkit内核浏览器
        var CompatibleURL = window.URL || window.webkitURL;
        //将视频流设置为video元素的源
        try {
            //谷歌浏览器放弃此功能
            video.src = CompatibleURL.createObjectURL(stream);
        }catch (e) {
            console.log(e);
            video.srcObject=stream;
        }
        //播放视频
        video.play();
    }

    //异常的回调函数
    function error(error){
        console.log("访问用户媒体设备失败：",error.name,error.message);
    }
    if (navigator.mediaDevices.getUserMedia || navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia){
        //调用用户媒体设备，访问摄像头
        getUserMedia({
            video:{width:480,height:320}
        },success,error);
    } else {
        alert("你的浏览器不支持访问用户媒体设备");
    }

    function face_register() {
        $.ajax({
            type: "POST",
            url: "faceRegister",
            data: {
                action:dataURL
            },
            success: function (data) {
                if(data=="SUCCESS"){
                    alert("注册成功");
                    state="成功";
                    window.location.href = 'updateProfile';
                }else{
                    if(photo_state=="打开")
                        photo();
                }
            },
            error:function () {
                alert("Error");
            }
        });
    }


</script>
<script>
    layui.use('upload', function () {
        var $ = layui.jquery
            , upload = layui.upload;

        //普通图片上传
        var uploadInst = upload.render({
            elem: '#btnUploadAvatar'
            , url: '/upload/'
            ,auto:false
            ,bindAction:"#startUpload"
            ,choose: function (obj) {
                //预读本地文件示例，不支持ie8
                obj.preview(function (index, file, result) {
                    $('#demo1').attr('src', result); //图片链接（base64）
                });
            }
            , done: function (res) {
                //如果上传失败
                if (!res.success) {
                    return layer.msg('上传失败');
                }
                //上传成功
                else{
                    $('#UserAvatar').attr('src', res.data);
                    $('#navbarAvator').attr('src', res.data);
                    layer.msg("上传成功");
                    $("#changeAvatarModal").modal('hide');
                    // this.trigger('click');
                }
            }
            , error: function () {
                //演示失败状态，并实现重传
                var demoText = $('#demoText');
                demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
                demoText.find('.demo-reload').on('click', function () {
                    uploadInst.upload();
                });
            }
        });
    });

    $(document).ready(function () {
        getProvince();
        getCity();
    });

    $(function () {
        $("#changePasswordForm").validate({
            rules: {
                password: {
                    required: true,
                    minlength: 6,
                    maxlength: 16
                },
                newPassword: {
                    required: true,
                    minlength: 6,
                    maxlength: 16
                },
                confirmPassword: {
                    required: true,
                    minlength: 6,
                    maxlength: 16,
                    equalTo: "#newPassword"
                },
                action: "required"
            },
            messages: {
                password: {
                    required: "旧密码为必填项",
                    minlength: "密码长度不能小于 6 位",
                    maxlength: "密码长度不能大于 16 位"
                },
                newPassword: {
                    required: "新密码为必填项",
                    minlength: "密码长度不能小于 6 位",
                    maxlength: "密码长度不能大于 16 位"
                },
                confirmPassword: {
                    // required: "该字段为必填项",
                    minlength: "密码长度不能大于 6 位",
                    maxlength: "密码长度不能大于 16 位",
                    equalTo: "两次输入的密码不一致"
                }
                // action: "Please provide some data"
            },
            errorElement: "em",
            errorPlacement: function (error, element) {
                // Add the `invalid-feedback` class to the error element
                error.addClass("invalid-feedback");

                if (element.prop("type") === "checkbox") {
                    error.insertAfter(element.next("label"));
                } else {
                    error.insertAfter(element);
                }
            },
            highlight: function (element, errorClass, validClass) {
                $(element).addClass("is-invalid").removeClass("");
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).addClass("").removeClass("is-invalid");
            }

        });

        $("#updateProfileForm").validate({
            rules: {
                userNickname: {
                    required: true,
                    maxlength: 10
                },
                userBirthday: {
                    // required: true,
                    dateISO: true,
                    maxlength: 10
                },
                 action: "required"
            },
            messages: {
                userNickname: {
                    required: "昵称为必填项",
                    maxlength: "昵称长度不能大于 10 位"
                },
                userBirthday: {
                    // required: "新密码为必填项",
                    dateISO: "请输入有效的日期格式"
                },
                action: "Please provide some data"
            },
            errorElement: "em",
            errorPlacement: function (error, element) {
                // Add the `invalid-feedback` class to the error element
                error.addClass("invalid-feedback");

                if (element.prop("type") === "checkbox") {
                    error.insertAfter(element.next("label"));
                } else {
                    error.insertAfter(element);
                }
            },
            highlight: function (element, errorClass, validClass) {
                $(element).addClass("is-invalid").removeClass("");
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).addClass("").removeClass("is-invalid");
            }

        });
    });

    $("#btnUpdateProfile").click(function () {
        var hobby = "";
        $(".toggle-button button").each(function () {
            if ($(this).hasClass("active")) {
                hobby += $(this).text().trim() + " ";
            }
        });
        console.log(hobby);
        var location = $("#inputProvince").val() + document.getElementById("inputCity")[$("#inputCity").val()].innerText;
        var userNickname = $("#userNickname").val();
        var sex = $('input:radio[name="inlineRadioOptions"]:checked').val();
        var birthday = $("#userBirthday").val();
        var userSignature = $("#userSignature").val();
        $.ajax({
            type: "post",
            url: "updateProfileAction",
            data: {
                "location": location,
                "hobby": hobby,
                "userNickname": userNickname,
                "sex": sex,
                "birthday": birthday,
                "userSignature": userSignature
            },
            success: function (data) {
                if(data==="修改信息成功") {
                    alert(data);
                }
            }
        })
    });

    function getProvince() {
        str = "";
        for (var i = 0; i < provinceArr.length; i++) {
            str += "<option>" + provinceArr[i] + "</option>";
        }
        $("#inputProvince").html(str);
    }

    function getCity() {
        //1.获取省份选择框的对象
        // var provincesobj = $("#inputProvince");
        var provincesobj = document.getElementById("inputProvince");
        //2.获取市县选择框的对象
        // var cityobj = $("#inputCity");
        var cityobj = document.getElementById("inputCity");
        //3.获取被选择的省份的索引
        var index = provincesobj.selectedIndex;
        //alert(provincesobj[index].value+","+provincesobj[index].text);
        ////4.通过省份的索引获取它的value值，value值也是它在数组的索引值
        var value = provincesobj[index].value;
        //5.获取对应省份的市县数组
        var cityName = cityArr[index];
        //6.将下拉框清楚索引为0之后的，只保留第一个
        cityobj.length = 1;
        //通过循环遍历市县元素给下拉框赋值
        for (var i = 1; i < cityName.length; i++) {
            cityobj.options[cityobj.options.length] = new Option(cityName[i], i);
        }

    }


    $("#btnChangePassword").click(function () {
        var userEmail = $("#userEmail").val();
        var password = $("#password").val();
        var newPassword = $("#newPassword").val();
        var confirmPassword = $("#confirmPassword").val();
        $.ajax({
            type: "post",
            url: "/changePassword",
            data: {
                "userEmail": userEmail, "password": password,
                "newPassword": newPassword, "confirmPassword": confirmPassword
            },
            success: function (data) {
                console.log(data);
                if (data === "密码修改成功")
                    bootoast.toast({
                        message: data,
                        type: 'success',
                        position: 'right-bottom',
                        icon: 'default',
                        timeout: 2,
                        animationDuration: 300,
                        dismissible: true
                    });
                else
                    bootoast.toast({
                        message: data,
                        type: 'danger',
                        position: 'right-bottom',
                        icon: 'default',
                        timeout: 2,
                        animationDuration: 300,
                        dismissible: true
                    });
                $('#changePasswordForm')[0].reset();
            }
        });
    });

    $(function () {

        $("#userNickname").val('{{#User.nickName}}{{.}}{{/User.nickName}}{{^User.nickName}}{{/User.nickName}}');
        var sexInfo = '{{#User.sex}}{{.}}{{/User.sex}}{{^User.sex}}{{/User.sex}}';
        if ('男' == sexInfo) {
            $("input[name='inlineRadioOptions']")[0].checked = true;
        } else if ('女' == sexInfo) {
            $("input[name='inlineRadioOptions']")[1].checked = true;
        }
        var birthdayInfo = '{{#User.birthday}}{{.}}{{/User.birthday}}{{^User.birthday}}{{/User.birthday}}';
        $("#userBirthday").val(birthdayInfo);
        var locationInfo = '{{#User.location}}{{.}}{{/User.location}}{{^User.location}}{{/User.location}}';
        var location = locationInfo;
        if (locationInfo != '') {
            var splitLoc = location.search(/省|市|区/);
            var province = location.substring(0, splitLoc + 1);
            var city = location.substring(splitLoc + 1);
            $("#inputProvince").val(province);
            // $('#inputCity').empty();
            var index = $("#inputProvince").get(0).selectedIndex;
            var cityName = cityArr[index];
            $("#inputCity").length = cityName.length;

            // for (var i = 1; i < cityName.length; i++) {
            //     // $("#inputCity").options[$("#inputCity").options.length] = new Option(cityName[i], i);
            //     $("#inputCity").append("<option value='"+i+"'>"+cityName[i]+"</option>");
            // }
            getCity();
            // $("#inputCity").text(city);
            // $("#inputCity").find("option[text="+city+"]").attr("selected",true);
            $("#inputCity").find("option").each(function () {
                if ($(this).text() == "...") {
                    $(this).css("display", "none");
                } else if ($(this).text() == city) {
                    $(this).attr("selected", true);
                } else {
                    $(this).attr("selected", false);
                }
            });
        }
        var hobbyInfo = '{{#User.hobby}}{{.}}{{/User.hobby}}{{^User.hobby}}{{/User.hobby}}';
        if (hobbyInfo != '') {
            var hobbyArr = hobbyInfo.split(" ");
            var hooby_tag = document.getElementsByName("hobby_tag");
            for (var i = 0; i < hooby_tag.length; i++) {
                for (var j = 0; j < hobbyArr.length - 1; j++) {
                    if (hooby_tag[i].innerText == hobbyArr[j]) {
                        hooby_tag[i].click();
                    }
                }
            }
        }
        var signatureInfo = '{{#User.signature}}{{.}}{{/User.signature}}{{^User.signature}}{{/User.signature}}';
        $("#userSignature").val(signatureInfo);
        var emailInfo = '{{#User.userEmail}}{{.}}{{/User.userEmail}}{{^User.userEmail}}{{/User.userEmail}}';
        if (emailInfo != '') {
            $("#showUserEmail").text(emailInfo);
        }

    });

</script>
</html>